<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>Web 架构智能决策助手</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-slate-950 text-slate-100 min-h-screen">
  <div class="max-w-4xl mx-auto px-4 py-10 space-y-10">

    <!-- 标题 -->
    <header class="space-y-2">
      <h1 class="text-3xl font-bold tracking-tight">Web 架构智能决策助手</h1>
      <p class="text-slate-400 text-sm">
        一个真正帮你<strong>决定技术架构</strong>，并直接生成<strong>高质量 AI 开发合同（Prompt）</strong>的工具
      </p>
    </header>

    <!-- 项目介绍 -->
    <section class="space-y-3">
      <h2 class="text-xl font-semibold">① 项目介绍（非常重要）</h2>
      <textarea
        id="projectDesc"
        placeholder="示例：这是一个面向加密货币用户的数据可视化网站，主要展示 ENS、NFT、链上统计数据，目标用户是 Web3 高级用户，注重性能与视觉质感。"
        class="w-full min-h-[120px] rounded-lg bg-slate-900 border border-slate-700 p-3 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"
      ></textarea>
      <p class="text-xs text-slate-400 leading-relaxed">
        高效描述建议：<br />
        • 做什么（核心功能）<br />
        • 给谁用（用户画像）<br />
        • 看重什么（性能 / SEO / 视觉 / 可维护性）<br />
        • 是否长期维护或扩展
      </p>
    </section>

    <!-- 需求选择 -->
    <section class="space-y-6">
      <h2 class="text-xl font-semibold">② 需求选择</h2>

      <div class="grid grid-cols-1 sm:grid-cols-2 gap-4" id="options"></div>
    </section>

    <!-- 结果 -->
    <section class="space-y-4">
      <h2 class="text-xl font-semibold">③ 推荐架构方案</h2>
      <div id="result" class="rounded-lg bg-slate-900 border border-slate-700 p-4 text-sm text-slate-300">
        请先选择需求
      </div>
    </section>

    <!-- AI Prompt -->
    <section class="space-y-4">
      <h2 class="text-xl font-semibold">④ AI 开发合同（Prompt）</h2>
      <textarea
        id="prompt"
        readonly
        class="w-full min-h-[260px] rounded-lg bg-slate-900 border border-slate-700 p-3 text-xs leading-relaxed text-slate-200"
      ></textarea>
      <p class="text-xs text-slate-400">
        直接复制 → 粘给 AI，即可进入<strong>专业开发模式</strong>
      </p>
    </section>

  </div>

<script>
/* ===== 架构方案定义 ===== */
const stacks = {
  "Next.js + Tailwind": {
    score: 0,
    reasons: [],
  },
  "Vite + React + Tailwind": {
    score: 0,
    reasons: [],
  },
  "Next.js App Router + Server Actions": {
    score: 0,
    reasons: [],
  },
  "纯前端 SPA（Vite）": {
    score: 0,
    reasons: [],
  },
  "Astro + Islands": {
    score: 0,
    reasons: [],
  }
}

/* ===== 规则（带权重） ===== */
const rules = [
  {
    label: "需要 SEO / 搜索引擎流量",
    weight: { "Next.js + Tailwind": 3, "Next.js App Router + Server Actions": 4, "Astro + Islands": 3 }
  },
  {
    label: "偏数据仪表盘 / 后台 / 内部工具",
    weight: { "Vite + React + Tailwind": 3, "纯前端 SPA（Vite）": 4 }
  },
  {
    label: "追求极致开发速度",
    weight: { "Vite + React + Tailwind": 3, "纯前端 SPA（Vite）": 3 }
  },
  {
    label: "长期维护 & 可扩展",
    weight: { "Next.js App Router + Server Actions": 4, "Next.js + Tailwind": 3 }
  },
  {
    label: "视觉动效 / 高级 UI",
    weight: { "Vite + React + Tailwind": 3, "Next.js + Tailwind": 2 }
  },
  {
    label: "主要是内容型网站 / 文档 / 博客",
    weight: { "Astro + Islands": 4, "Next.js + Tailwind": 2 }
  }
]

/* ===== 渲染选项 ===== */
const optionsEl = document.getElementById("options")

rules.forEach((rule, index) => {
  const div = document.createElement("div")
  div.className = "flex items-center gap-3 rounded-lg border border-slate-700 bg-slate-900 px-4 py-3 cursor-pointer"
  div.innerHTML = `
    <input type="checkbox" id="opt-${index}" class="accent-indigo-500 w-4 h-4" />
    <label for="opt-${index}" class="text-sm">${rule.label}</label>
  `
  div.onclick = () => {
    const cb = div.querySelector("input")
    cb.checked = !cb.checked
    calculate()
  }
  optionsEl.appendChild(div)
})

/* ===== 计算推荐 ===== */
function calculate() {
  Object.values(stacks).forEach(s => {
    s.score = 0
    s.reasons = []
  })

  rules.forEach((rule, i) => {
    if (document.getElementById(`opt-${i}`).checked) {
      for (const stack in rule.weight) {
        stacks[stack].score += rule.weight[stack]
        stacks[stack].reasons.push(rule.label)
      }
    }
  })

  const sorted = Object.entries(stacks).sort((a,b) => b[1].score - a[1].score)

  const best = sorted[0]
  if (best[1].score === 0) return

  document.getElementById("result").innerHTML = `
    <strong class="text-indigo-400">${best[0]}</strong><br/>
    适配原因：${best[1].reasons.join("、")}<br/>
    评分：${best[1].score}
  `

  buildPrompt(sorted)
}

/* ===== AI Prompt ===== */
function buildPrompt(sorted) {
  const desc = document.getElementById("projectDesc").value || "（未填写项目介绍）"
  const main = sorted[0][0]
  const backup = sorted.slice(1,3).map(s => s[0]).join(" / ")

  document.getElementById("prompt").value = `
你是一名资深全栈架构师与高级前端工程师。

【项目介绍】
${desc}

【核心目标】
- 采用「${main}」作为主架构
- 备选方案：${backup}
- 追求工程可维护性、性能与开发效率的最佳平衡

【技术要求】
1. 明确项目目录结构
2. 状态管理与数据流设计
3. 样式方案（Tailwind 使用策略）
4. 性能与 SEO（如适用）
5. 可扩展性与后续演进建议

【交付期望】
- 清晰的架构说明
- 可直接执行的项目初始化方案
- 关键技术选型的理由说明
- 避坑建议

请用专业工程师视角回答，避免泛泛而谈。
`.trim()
}
</script>
</body>
</html>
